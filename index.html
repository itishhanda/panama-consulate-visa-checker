<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panama Visa Requirement Check</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #f5f7fa;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #005baa;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eaeaea;
            padding-bottom: 15px;
        }

        .intro {
            background-color: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #005baa;
        }

        .form-group {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: #f9f9f9;
            transition: all 0.3s ease;
        }

        .form-group.hidden {
            display: none;
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #005baa;
            font-size: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
            background-color: white;
            cursor: pointer;
        }

        select:focus {
            border-color: #005baa;
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 91, 170, 0.2);
        }

        .options-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .option-item {
            flex: 1;
            min-width: 120px;
        }

        .option-button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #eaeaea;
            border: 2px solid #ddd;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .option-button:hover {
            background-color: #d9e8f7;
            border-color: #005baa;
        }

        .option-button.selected {
            background-color: #005baa;
            color: white;
            border-color: #005baa;
        }

        .visa-countries {
            font-size: 14px;
            color: #666;
            margin-top: 8px;
            font-style: italic;
        }

        button {
            background-color: #005baa;
            color: white;
            border: none;
            padding: 14px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        button:hover {
            background-color: #004a8c;
        }

        .result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 5px;
            display: none;
        }

        .result.visible {
            display: block;
        }

        .result h3 {
            margin-top: 0;
            color: #005baa;
        }

        .visa-required {
            background-color: #ffeaa7;
            border-left: 5px solid #fdcb6e;
        }

        .visa-not-required {
            background-color: #d1f7c4;
            border-left: 5px solid #55efc4;
        }

        .special-case {
            background-color: #ffd8d8;
            border-left: 5px solid #ff7675;
        }

        .authorized-visa {
            background-color: #e8f4fd;
            border-left: 5px solid #3498db;
        }

        .stamped-visa {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
        }

        .transit-visa {
            background-color: #e8f4fd;
            border-left: 5px solid #3498db;
        }

        .required {
            color: #e74c3c;
        }

        .visa-type {
            padding: 10px 15px;
            border-radius: 4px;
            font-weight: bold;
            margin: 10px 0;
            display: inline-block;
            font-size: 18px;
        }

        .authorized {
            background-color: #3498db;
            color: white;
        }

        .stamped {
            background-color: #ffc107;
            color: #333;
        }

        .transit {
            background-color: #2ecc71;
            color: white;
        }

        .action-buttons {
            margin: 20px 0;
            text-align: center;
        }

        .requirements-btn {
            background-color: #8B1E41;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
            width: auto;
            display: inline-block;
            margin-top: 0;
            text-decoration: none;
        }

        .requirements-btn:hover {
            background-color: #6a1630;
        }

        .info-box {
            background-color: #f8f9fa;
            border-left: 4px solid #005baa;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .info-box h4 {
            margin-top: 0;
            color: #005baa;
        }

        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            color: #666;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .footer a {
            color: #005baa;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .exempt-notice {
            background-color: #e8f6f3;
            border-left: 4px solid #1abc9c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            display: none;
        }

        .exempt-notice.visible {
            display: block;
        }

        .submit-btn {
            display: none;
        }

        .submit-btn.visible {
            display: block;
        }

        @media (max-width: 600px) {
            .options-group {
                flex-direction: column;
            }
            
            .option-item {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Panama Visa Requirement Check</h1>
        
        <div class="intro">
            <p>This tool helps determine if you need a visa to enter Panama based on your nationality, existing visas, and length of stay.</p>
            <p>Special conditions apply to nationals of Haiti and Cuba for transit visas.</p>
        </div>
        
        <form id="visaForm">
            <!-- Question 1: Nationality -->
            <div class="form-group">
                <div class="question-title">1. What is your nationality?</div>
                <label for="nationality">Select your country <span class="required">*</span></label>
                <select id="nationality" required>
                    <option value="">-- Select your country --</option>
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            
            <!-- Notice for visa-exempt countries -->
            <div id="exemptNotice" class="exempt-notice">
                <h4>Visa Not Required</h4>
                <p>Based on your nationality, you do not require a visa to enter Panama for tourism purposes.</p>
            </div>
            
            <!-- Question 2: Visa from privileged countries -->
            <div id="question2" class="form-group hidden">
                <div class="question-title">2. Do you have a valid visa for Canada, USA, Australia, South Korea, Japan, UK, Singapore, or any EU country?</div>
                <div class="options-group">
                    <div class="option-item">
                        <div class="option-button" data-value="yes">Yes</div>
                    </div>
                    <div class="option-item">
                        <div class="option-button" data-value="no">No</div>
                    </div>
                </div>
                <div class="visa-countries">Holders of valid visas from these countries can stay in Panama for up to 30 days without a separate visa.</div>
                <input type="hidden" id="has_privileged_visa">
            </div>
            
            <!-- Question 3: Duration of stay -->
            <div id="question3" class="form-group hidden">
                <div class="question-title">3. How long will you stay in Panama?</div>
                <div class="options-group">
                    <div class="option-item">
                        <div class="option-button" data-value="short">12 hours or less (Transit)</div>
                    </div>
                    <div class="option-item">
                        <div class="option-button" data-value="long">More than 12 hours</div>
                    </div>
                </div>
                <input type="hidden" id="stay_duration">
            </div>
            
            <button type="submit" id="submitBtn" class="submit-btn">Check Visa Requirements</button>
        </form>
        
        <div id="result" class="result"></div>
        
        <div class="footer">
            <p>For official and most up-to-date information, please visit the <a href="http://panamaconsulatehk.com/visas/" target="_blank">Panama Consulate website</a>.</p>
        </div>
    </div>

    <script>
        // Country lists based on user specifications
        const visaExemptCountries = [
            'AD', 'AG', 'AR', 'AM', 'AU', 'AT', 'BS', 'BY', 'BE', 'BZ', 
            'BT', 'BO', 'BA', 'BW', 'BR', 'BN', 'BG', 'KH', 'CA', 'CL', 
            'CO', 'KM', 'CR', 'HR', 'CY', 'CZ', 'DK', 'DM', 'EC', 'SV', 
            'EE', 'FJ', 'FI', 'FR', 'DE', 'GR', 'GD', 'GT', 'GY', 'HN', 
            'HK', 'HU', 'IS', 'IE', 'IL', 'IT', 'JM', 'JP', 'KI', 'KW', 
            'LV', 'LI', 'LT', 'LU', 'MO', 'MK', 'MG', 'MY', 'MV', 'MT', 
            'MH', 'MU', 'MX', 'FM', 'MD', 'MC', 'MN', 'ME', 'NA', 'NR', 
            'NL', 'NZ', 'NI', 'NO', 'OM', 'PW', 'PA', 'PG', 'PY', 'PE', 
            'PL', 'PT', 'QA', 'RO', 'RU', 'WS', 'SM', 'ST', 'SA', 'RS', 
            'SC', 'SG', 'SK', 'SI', 'SB', 'ZA', 'KR', 'ES', 'LK', 'KN', 
            'LC', 'VC', 'SR', 'SE', 'CH', 'TW', 'TH', 'TO', 'TT', 'TN', 
            'TR', 'TV', 'UG', 'UA', 'AE', 'GB', 'US', 'UY', 'VU', 'VA', 
            'VN'
        ];

        const authorizedVisaCountries = [
            'AF', 'AL', 'DZ', 'AO', 'AZ', 'BH', 'BD', 'BJ', 'BF', 'BI', 
            'CV', 'TD', 'CI', 'DJ', 'EG', 'GQ', 'ER', 'ET', 'GA', 'GM', 
            'GE', 'GN', 'GW', 'HT', 'ID', 'IR', 'IQ', 'JO', 'KZ', 'XK', 
            'KG', 'LA', 'LB', 'LS', 'LR', 'LY', 'ML', 'MR', 'MA', 'MZ', 
            'MM', 'NP', 'NE', 'NG', 'OM', 'PK', 'PS', 'RW', 'SN', 'SL', 
            'SO', 'SD', 'SR', 'SY', 'TJ', 'TM', 'UZ', 'YE', 'ZM'
        ];

        const stampedVisaCountries = [
            'CM', 'CF', 'CU', 'DO', 'GH', 'MO', 'MW', 'CN', 'PH', 'CG', 
            'TG', 'VE', 'ZW'
        ];

        const transitVisaCountries = [
            'AF', 'AO', 'DZ', 'AZ', 'BD', 'BJ', 'BF', 'BI', 'CV', 'CM', 
            'TD', 'CG', 'CI', 'CD', 'DJ', 'EG', 'GQ', 'ER', 'ET', 'GA', 
            'GM', 'GE', 'GH', 'GN', 'GW', 'IN', 'KZ', 'KE', 'KG', 'LR', 
            'ML', 'MR', 'MZ', 'NP', 'NE', 'NG', 'PK', 'SN', 'SL', 'SO', 
            'LK', 'SD', 'TJ', 'TG', 'TM', 'UZ'
        ];

        // Special countries with different conditions for transit visas only
        const specialCountries = ['HT', 'CU'];

        // Privileged visa countries
        const privilegedVisaCountries = ['CA', 'US', 'AU', 'KR', 'JP', 'GB', 'SG'];
        // Add EU countries to privileged list
        const euCountries = [
            'AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 
            'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 
            'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'
        ];
        privilegedVisaCountries.push(...euCountries);

        // All countries for the dropdown
        const allCountries = [
            {code: 'AF', name: 'Afghanistan'},
            {code: 'AL', name: 'Albania'},
            {code: 'DZ', name: 'Algeria'},
            {code: 'AD', name: 'Andorra'},
            {code: 'AO', name: 'Angola'},
            {code: 'AG', name: 'Antigua and Barbuda'},
            {code: 'AR', name: 'Argentina'},
            {code: 'AM', name: 'Armenia'},
            {code: 'AU', name: 'Australia'},
            {code: 'AT', name: 'Austria'},
            {code: 'AZ', name: 'Azerbaijan'},
            {code: 'BS', name: 'Bahamas'},
            {code: 'BH', name: 'Bahrain'},
            {code: 'BD', name: 'Bangladesh'},
            {code: 'BB', name: 'Barbados'},
            {code: 'BY', name: 'Belarus'},
            {code: 'BE', name: 'Belgium'},
            {code: 'BZ', name: 'Belize'},
            {code: 'BJ', name: 'Benin'},
            {code: 'BT', name: 'Bhutan'},
            {code: 'BO', name: 'Bolivia'},
            {code: 'BA', name: 'Bosnia and Herzegovina'},
            {code: 'BW', name: 'Botswana'},
            {code: 'BR', name: 'Brazil'},
            {code: 'BN', name: 'Brunei'},
            {code: 'BG', name: 'Bulgaria'},
            {code: 'BF', name: 'Burkina Faso'},
            {code: 'BI', name: 'Burundi'},
            {code: 'CV', name: 'Cabo Verde'},
            {code: 'KH', name: 'Cambodia'},
            {code: 'CM', name: 'Cameroon'},
            {code: 'CA', name: 'Canada'},
            {code: 'CF', name: 'Central African Republic'},
            {code: 'TD', name: 'Chad'},
            {code: 'CL', name: 'Chile'},
            {code: 'CN', name: 'China'},
            {code: 'CO', name: 'Colombia'},
            {code: 'KM', name: 'Comoros'},
            {code: 'CG', name: 'Congo'},
            {code: 'CD', name: 'Democratic Republic of Congo'},
            {code: 'CR', name: 'Costa Rica'},
            {code: 'CI', name: 'Ivory Coast'},
            {code: 'HR', name: 'Croatia'},
            {code: 'CU', name: 'Cuba'},
            {code: 'CY', name: 'Cyprus'},
            {code: 'CZ', name: 'Czech Republic'},
            {code: 'DK', name: 'Denmark'},
            {code: 'DJ', name: 'Djibouti'},
            {code: 'DM', name: 'Dominica'},
            {code: 'DO', name: 'Dominican Republic'},
            {code: 'EC', name: 'Ecuador'},
            {code: 'EG', name: 'Egypt'},
            {code: 'SV', name: 'El Salvador'},
            {code: 'GQ', name: 'Equatorial Guinea'},
            {code: 'ER', name: 'Eritrea'},
            {code: 'EE', name: 'Estonia'},
            {code: 'SZ', name: 'Eswatini'},
            {code: 'ET', name: 'Ethiopia'},
            {code: 'FJ', name: 'Fiji'},
            {code: 'FI', name: 'Finland'},
            {code: 'FR', name: 'France'},
            {code: 'GA', name: 'Gabon'},
            {code: 'GM', name: 'Gambia'},
            {code: 'GE', name: 'Georgia'},
            {code: 'DE', name: 'Germany'},
            {code: 'GH', name: 'Ghana'},
            {code: 'GR', name: 'Greece'},
            {code: 'GD', name: 'Grenada'},
            {code: 'GT', name: 'Guatemala'},
            {code: 'GN', name: 'Guinea'},
            {code: 'GW', name: 'Guinea-Bissau'},
            {code: 'GY', name: 'Guyana'},
            {code: 'HT', name: 'Haiti'},
            {code: 'HN', name: 'Honduras'},
            {code: 'HU', name: 'Hungary'},
            {code: 'IS', name: 'Iceland'},
            {code: 'IN', name: 'India'},
            {code: 'ID', name: 'Indonesia'},
            {code: 'IR', name: 'Iran'},
            {code: 'IQ', name: 'Iraq'},
            {code: 'IE', name: 'Ireland'},
            {code: 'IL', name: 'Israel'},
            {code: 'IT', name: 'Italy'},
            {code: 'JM', name: 'Jamaica'},
            {code: 'JP', name: 'Japan'},
            {code: 'JO', name: 'Jordan'},
            {code: 'KZ', name: 'Kazakhstan'},
            {code: 'KE', name: 'Kenya'},
            {code: 'KI', name: 'Kiribati'},
            {code: 'XK', name: 'Kosovo'},
            {code: 'KW', name: 'Kuwait'},
            {code: 'KG', name: 'Kyrgyzstan'},
            {code: 'LA', name: 'Laos'},
            {code: 'LV', name: 'Latvia'},
            {code: 'LB', name: 'Lebanon'},
            {code: 'LS', name: 'Lesotho'},
            {code: 'LR', name: 'Liberia'},
            {code: 'LY', name: 'Libya'},
            {code: 'LI', name: 'Liechtenstein'},
            {code: 'LT', name: 'Lithuania'},
            {code: 'LU', name: 'Luxembourg'},
            {code: 'MG', name: 'Madagascar'},
            {code: 'MW', name: 'Malawi'},
            {code: 'MY', name: 'Malaysia'},
            {code: 'MV', name: 'Maldives'},
            {code: 'ML', name: 'Mali'},
            {code: 'MT', name: 'Malta'},
            {code: 'MH', name: 'Marshall Islands'},
            {code: 'MR', name: 'Mauritania'},
            {code: 'MU', name: 'Mauritius'},
            {code: 'MX', name: 'Mexico'},
            {code: 'FM', name: 'Micronesia'},
            {code: 'MD', name: 'Moldova'},
            {code: 'MC', name: 'Monaco'},
            {code: 'MN', name: 'Mongolia'},
            {code: 'ME', name: 'Montenegro'},
            {code: 'MA', name: 'Morocco'},
            {code: 'MZ', name: 'Mozambique'},
            {code: 'MM', name: 'Myanmar'},
            {code: 'NA', name: 'Namibia'},
            {code: 'NR', name: 'Nauru'},
            {code: 'NP', name: 'Nepal'},
            {code: 'NL', name: 'Netherlands'},
            {code: 'NZ', name: 'New Zealand'},
            {code: 'NI', name: 'Nicaragua'},
            {code: 'NE', name: 'Niger'},
            {code: 'NG', name: 'Nigeria'},
            {code: 'KP', name: 'North Korea'},
            {code: 'MK', name: 'North Macedonia'},
            {code: 'NO', name: 'Norway'},
            {code: 'OM', name: 'Oman'},
            {code: 'PK', name: 'Pakistan'},
            {code: 'PW', name: 'Palau'},
            {code: 'PS', name: 'Palestine'},
            {code: 'PA', name: 'Panama'},
            {code: 'PG', name: 'Papua New Guinea'},
            {code: 'PY', name: 'Paraguay'},
            {code: 'PE', name: 'Peru'},
            {code: 'PH', name: 'Philippines'},
            {code: 'PL', name: 'Poland'},
            {code: 'PT', name: 'Portugal'},
            {code: 'QA', name: 'Qatar'},
            {code: 'RO', name: 'Romania'},
            {code: 'RU', name: 'Russia'},
            {code: 'RW', name: 'Rwanda'},
            {code: 'KN', name: 'Saint Kitts and Nevis'},
            {code: 'LC', name: 'Saint Lucia'},
            {code: 'VC', name: 'Saint Vincent and the Grenadines'},
            {code: 'WS', name: 'Samoa'},
            {code: 'SM', name: 'San Marino'},
            {code: 'ST', name: 'Sao Tome and Principe'},
            {code: 'SA', name: 'Saudi Arabia'},
            {code: 'SN', name: 'Senegal'},
            {code: 'RS', name: 'Serbia'},
            {code: 'SC', name: 'Seychelles'},
            {code: 'SL', name: 'Sierra Leone'},
            {code: 'SG', name: 'Singapore'},
            {code: 'SK', name: 'Slovakia'},
            {code: 'SI', name: 'Slovenia'},
            {code: 'SB', name: 'Solomon Islands'},
            {code: 'SO', name: 'Somalia'},
            {code: 'ZA', name: 'South Africa'},
            {code: 'KR', name: 'South Korea'},
            {code: 'SS', name: 'South Sudan'},
            {code: 'ES', name: 'Spain'},
            {code: 'LK', name: 'Sri Lanka'},
            {code: 'SD', name: 'Sudan'},
            {code: 'SR', name: 'Suriname'},
            {code: 'SE', name: 'Sweden'},
            {code: 'CH', name: 'Switzerland'},
            {code: 'SY', name: 'Syria'},
            {code: 'TW', name: 'Taiwan'},
            {code: 'TJ', name: 'Tajikistan'},
            {code: 'TZ', name: 'Tanzania'},
            {code: 'TH', name: 'Thailand'},
            {code: 'TG', name: 'Togo'},
            {code: 'TO', name: 'Tonga'},
            {code: 'TT', name: 'Trinidad and Tobago'},
            {code: 'TN', name: 'Tunisia'},
            {code: 'TR', name: 'Turkey'},
            {code: 'TM', name: 'Turkmenistan'},
            {code: 'TV', name: 'Tuvalu'},
            {code: 'UG', name: 'Uganda'},
            {code: 'UA', name: 'Ukraine'},
            {code: 'AE', name: 'United Arab Emirates'},
            {code: 'GB', name: 'United Kingdom'},
            {code: 'US', name: 'United States'},
            {code: 'UY', name: 'Uruguay'},
            {code: 'UZ', name: 'Uzbekistan'},
            {code: 'VU', name: 'Vanuatu'},
            {code: 'VA', name: 'Vatican City'},
            {code: 'VE', name: 'Venezuela'},
            {code: 'VN', name: 'Vietnam'},
            {code: 'YE', name: 'Yemen'},
            {code: 'ZM', name: 'Zambia'},
            {code: 'ZW', name: 'Zimbabwe'}
        ];

        // Initialize the form when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeForm();
            setupEventListeners();
        });

        // Initialize form elements
        function initializeForm() {
            populateCountryDropdown();
            setupOptionButtons();
        }

        // Populate the country dropdown with all countries
        function populateCountryDropdown() {
            const nationalitySelect = document.getElementById('nationality');
            
            // Clear any existing options except the first one
            while (nationalitySelect.options.length > 1) {
                nationalitySelect.remove(1);
            }
            
            // Sort countries alphabetically by name for better UX
            const sortedCountries = [...allCountries].sort((a, b) => a.name.localeCompare(b.name));
            
            // Add all countries to the dropdown
            sortedCountries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.code;
                option.textContent = country.name;
                nationalitySelect.appendChild(option);
            });
        }

        // Set up option button selection
        function setupOptionButtons() {
            document.querySelectorAll('.option-button').forEach(button => {
                button.addEventListener('click', function() {
                    handleOptionButtonClick(this);
                });
            });
        }

        // Handle option button click
        function handleOptionButtonClick(button) {
            // Remove selected class from siblings
            const parentGroup = button.closest('.options-group');
            if (parentGroup) {
                parentGroup.querySelectorAll('.option-button').forEach(sibling => {
                    sibling.classList.remove('selected');
                });
            }
            
            // Add selected class to clicked button
            button.classList.add('selected');
            
            // Set the value in the hidden input
            const hiddenInput = button.closest('.form-group').querySelector('input[type="hidden"]');
            if (hiddenInput) {
                hiddenInput.value = button.getAttribute('data-value');
                
                // Handle specific logic based on which question was answered
                if (hiddenInput.id === 'has_privileged_visa') {
                    handlePrivilegedVisaAnswer(hiddenInput.value);
                }
                
                if (hiddenInput.id === 'stay_duration') {
                    document.getElementById('submitBtn').classList.add('visible');
                }
            }
        }

        // Handle privileged visa answer
        function handlePrivilegedVisaAnswer(answer) {
            if (answer === 'yes') {
                showPrivilegedVisaResult();
            } else if (answer === 'no') {
                document.getElementById('question3').classList.remove('hidden');
                document.getElementById('submitBtn').classList.add('visible');
            }
        }

        // Set up all event listeners
        function setupEventListeners() {
            // Handle nationality change
            document.getElementById('nationality').addEventListener('change', function() {
                handleNationalityChange(this.value);
            });
            
            // Form submission
            document.getElementById('visaForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleFormSubmission();
            });
            
            // Event delegation for the view requirements button
            document.addEventListener('click', function(e) {
                if (e.target && e.target.id === 'viewRequirementsBtn') {
                    const page = e.target.getAttribute('data-page');
                    if (page) {
                        window.location.href = page;
                    }
                }
            });
        }

        // Handle nationality change
        function handleNationalityChange(nationality) {
            // Reset form state
            resetForm();
            
            if (!nationality) {
                return; // No country selected
            }
            
            if (visaExemptCountries.includes(nationality)) {
                // Show exempt notice
                document.getElementById('exemptNotice').classList.add('visible');
                document.getElementById('submitBtn').classList.add('visible');
            } else {
                // Show question 2
                document.getElementById('question2').classList.remove('hidden');
            }
            
            // Clear any previous result
            document.getElementById('result').classList.remove('visible');
        }

        // Reset form to initial state
        function resetForm() {
            // Reset hidden inputs
            document.getElementById('has_privileged_visa').value = '';
            document.getElementById('stay_duration').value = '';
            
            // Clear button selections
            document.querySelectorAll('.option-button.selected').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Hide all conditional elements
            document.getElementById('question2').classList.add('hidden');
            document.getElementById('question3').classList.add('hidden');
            document.getElementById('exemptNotice').classList.remove('visible');
            document.getElementById('submitBtn').classList.remove('visible');
            
            // Clear result
            document.getElementById('result').classList.remove('visible');
            document.getElementById('result').innerHTML = '';
        }

        // Handle form submission
        function handleFormSubmission() {
            // Get form values
            const nationality = document.getElementById('nationality').value;
            const hasPrivilegedVisa = document.getElementById('has_privileged_visa')?.value || '';
            const stayDuration = document.getElementById('stay_duration')?.value || '';
            
            // Validate form
            if (!validateForm(nationality, hasPrivilegedVisa, stayDuration)) {
                return;
            }
            
            // Calculate and display result
            calculateOutcome(nationality, hasPrivilegedVisa, stayDuration);
        }

        // Validate form inputs
        function validateForm(nationality, hasPrivilegedVisa, stayDuration) {
            if (!nationality) {
                alert('Please select your nationality.');
                return false;
            }
            
            // If country is not exempt, validate questions 2 and 3
            if (!visaExemptCountries.includes(nationality)) {
                if (!hasPrivilegedVisa) {
                    alert('Please answer question 2.');
                    return false;
                }
                
                if (hasPrivilegedVisa === 'no' && !stayDuration) {
                    alert('Please answer question 3.');
                    return false;
                }
            }
            
            return true;
        }

        // Calculate and display outcome
        function calculateOutcome(nationality, hasPrivilegedVisa, stayDuration) {
            const countryName = allCountries.find(c => c.code === nationality)?.name || 'your country';
            let result;
            
            if (visaExemptCountries.includes(nationality)) {
                result = getVisaExemptResult(countryName);
            } else if (hasPrivilegedVisa === 'yes') {
                result = getPrivilegedVisaResult();
            } else if (specialCountries.includes(nationality) && stayDuration === 'short') {
                result = getSpecialTransitResult(countryName);
            } else if (stayDuration === 'long') {
                result = getTouristVisaResult(nationality, countryName);
            } else {
                result = getTransitVisaResult(nationality, countryName);
            }
            
            displayResult(result);
        }

        // Get result for visa exempt countries
        function getVisaExemptResult(countryName) {
            return {
                class: 'visa-not-required',
                message: `
                    <h3>Visa Not Required</h3>
                    <p>Based on your nationality (${countryName}), you do not require a visa to enter Panama for tourism purposes.</p>
                `
            };
        }

        // Get result for privileged visa holders
        function getPrivilegedVisaResult() {
            return {
                class: 'visa-not-required',
                message: `
                    <h3>Visa Not Required for Stays Up to 30 Days</h3>
                    <p>Since you hold a valid visa from one of the privileged countries, you can stay in Panama for up to 30 days without requiring a separate visa.</p>
                `
            };
        }

        // Get result for special transit cases (Haiti and Cuba)
        function getSpecialTransitResult(countryName) {
            return {
                class: 'special-case',
                message: `
                    <h3>Special Transit Visa Required</h3>
                    <div class="visa-type transit">SPECIAL TRANSIT VISA REQUIRED</div>
                    <p>As a national of ${countryName} planning a transit stay of 12 hours or less, you need a special transit visa.</p>
                    <div class="action-buttons">
                        <a href="special-transit-visa.html" class="requirements-btn">View Required Documents</a>
                    </div>
                `
            };
        }

        // Get result for tourist visas
        function getTouristVisaResult(nationality, countryName) {
            if (authorizedVisaCountries.includes(nationality)) {
                return {
                    class: 'authorized-visa',
                    message: `
                        <h3>Authorized Tourist Visa Required</h3>
                        <div class="visa-type authorized">AUTHORIZED VISA REQUIRED</div>
                        <p>As a national of ${countryName}, you need an <strong>Authorized Tourist Visa</strong> to enter Panama.</p>
                        <div class="action-buttons">
                            <a href="tourist-visa.html" class="requirements-btn">View Required Documents</a>
                        </div>
                    `
                };
            } else if (stampedVisaCountries.includes(nationality)) {
                return {
                    class: 'stamped-visa',
                    message: `
                        <h3>Stamped Tourist Visa Required</h3>
                        <div class="visa-type stamped">STAMPED VISA REQUIRED</div>
                        <p>As a national of ${countryName}, you need a <strong>Stamped Tourist Visa</strong> to enter Panama.</p>
                        <div class="action-buttons">
                            <a href="tourist-visa.html" class="requirements-btn">View Required Documents</a>
                        </div>
                    `
                };
            } else {
                return {
                    class: 'visa-required',
                    message: `
                        <h3>Tourist Visa Required</h3>
                        <p>As a national of ${countryName}, you need a tourist visa to enter Panama.</p>
                        <div class="action-buttons">
                            <a href="tourist-visa.html" class="requirements-btn">View Required Documents</a>
                        </div>
                    `
                };
            }
        }

        // Get result for transit visas
        function getTransitVisaResult(nationality, countryName) {
            if (transitVisaCountries.includes(nationality)) {
                return {
                    class: 'transit-visa',
                    message: `
                        <h3>Transit Visa Required</h3>
                        <div class="visa-type transit">TRANSIT VISA REQUIRED</div>
                        <p>As a national of ${countryName} planning a transit stay of 12 hours or less, you need a transit visa.</p>
                        <div class="action-buttons">
                            <a href="transit-visa.html" class="requirements-btn">View Required Documents</a>
                        </div>
                    `
                };
            } else {
                return {
                    class: 'visa-required',
                    message: `
                        <h3>Tourist Visa Required</h3>
                        <p>As a national of ${countryName}, you need a tourist visa to enter Panama regardless of duration.</p>
                        <div class="action-buttons">
                            <a href="tourist-visa.html" class="requirements-btn">View Required Documents</a>
                        </div>
                    `
                };
            }
        }

        // Display result for privileged visa holders (immediate response)
        function showPrivilegedVisaResult() {
            const result = getPrivilegedVisaResult();
            displayResult(result);
            
            // Hide question 3 and submit button
            document.getElementById('question3').classList.add('hidden');
            document.getElementById('submitBtn').classList.remove('visible');
        }

        // Display result in the UI
        function displayResult(result) {
            const resultElement = document.getElementById('result');
            if (resultElement) {
                resultElement.className = `result ${result.class} visible`;
                resultElement.innerHTML = result.message;
            }
        }
    </script>
</body>
</html>
